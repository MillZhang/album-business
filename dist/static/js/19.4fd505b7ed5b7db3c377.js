webpackJsonp([19,43],{131:function(t,e,r){r(388);var o=r(30)(r(422),r(335),"data-v-56767734",null);t.exports=o.exports},180:function(t,e,r){"use strict";var o=r(59),a=r.n(o),i=r(60),n=r.n(i),s=r(35),d=r.n(s),m=r(34);e.a=new(function(){function t(){a()(this,t),this.currentDeviceDpr=document.documentElement.getAttribute("data-dpr")}return n()(t,[{key:"setEitorPage",value:function(t,e,r,o){var a=App.config.layoutList[t],i=a.area[e],n=a.scale,s=(a.tw,a.th,i.aw/i.ah),u=a.tw*n/r,f=r/m.a.getConstant().EditorWidth,g={position:"absolute",width:i.aw*n/u+"px",height:i.ah*n/u+"px",left:i.ax*n/u+"px",top:i.ay*n/u+"px",overflow:"hidden",zIndex:100+t,backgroundRepeat:"no-repeat"};if(!o){var c=App.config.photoList[t];null!=c.dpr&&void 0!=c.dpr||(c.dpr=1);var l=this.currentDeviceDpr/c.dpr,p=App.config.photoList[t].list;if(void 0!=p){var h=p[e];if(""==h.key||0==h.width)g.background="url("+d.a+") center no-repeat",g.backgroundPosition="100% 100%",g.backgroundSize="100% 100%";else{var v=encodeURI(m.a.getConstant().DOMAIN+h.key+m.a.getConstant().THUMB600+"/rotate/"+h.degree),b=void 0,k=void 0;g.backgroundImage="url("+v+")",g.backgroundPosition=h.location.position.left*f*l.toFixed(2)+"px "+h.location.position.top*f*l.toFixed(2)+"px";s>=h.width/h.height?(b="100%",k="auto"):(b="auto",k="100%"),g.backgroundSize=b+" "+k}}}return g}},{key:"getTemplateImage",value:function(t){var e=App.config.layoutList[t];return void 0==e?"":e.pngImg+m.a.getConstant().THUMB600}},{key:"getImageRadio",value:function(){if(null==App.config.layoutList)return 1;var t=App.config.layoutList[0];return t.tw/t.th}}]),t}())},185:function(t,e,r){t.exports=r.p+"static/img/bg-4.fb97f10.jpg"},230:function(t,e,r){e=t.exports=r(118)(),e.i(r(254),""),e.push([t.i,"",""])},254:function(t,e,r){e=t.exports=r(118)(),e.push([t.i,".preivew{width:100%;height:100%;background:url("+r(185)+") 50% no-repeat;background-size:cover}.preivew .block{width:80%;margin:0 auto;position:absolute;top:12%;left:10%}.preivew .block img{width:100%}.preivew .block .edit .pageDiv{position:relative;width:100%;height:100%}.preivew .block .edit .pageDiv .templateDiv{width:100%;height:100%}.preivew .block .edit{width:100%;display:block;position:relative;z-index:999}.flipbook{-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;-ms-transform-style:preserve-3d;transform-style:preserve-3d;-webkit-transform-origin:0 50%;-moz-transform-origin:0 50%;-ms-transform-origin:0 50%;-o-transform-origin:0 50%;transform-origin:0 50%;-webkit-transform:rotateY(0deg);-ms-transform:rotateY(0deg);-o-transform:rotateY(0deg);transform:rotateY(0deg)}.turnLeftAnimation{-webkit-animation-name:turnLeft;animation-name:turnLeft}.turnRightAnimation{-webkit-animation-name:trunRight;animation-name:trunRight}@keyframes turnLeft{0%{-webkit-transform:rotateY(0deg);-ms-transform:rotateY(0deg);-o-transform:rotateY(0deg);transform:rotateY(0deg)}50%{-webkit-transform:rotateY(-160deg);-ms-transform:rotateY(-160deg);-o-transform:rotateY(-160deg);transform:rotateY(-160deg)}to{-webkit-transform:rotateY(-180deg);-ms-transform:rotateY(-180deg);-o-transform:rotateY(-180deg);transform:rotateY(-180deg);opacity:0}}@-webkit-keyframes turnLeft{0%{-webkit-transform:rotateY(0deg);-ms-transform:rotateY(0deg);-o-transform:rotateY(0deg);transform:rotateY(0deg)}50%{-webkit-transform:rotateY(-160deg);-ms-transform:rotateY(-160deg);-o-transform:rotateY(-160deg);transform:rotateY(-160deg)}to{-webkit-transform:rotateY(-180deg);-ms-transform:rotateY(-180deg);-o-transform:rotateY(-180deg);transform:rotateY(-180deg);opacity:0}}@keyframes trunRight{0%{-webkit-transform:rotateY(-180deg);-ms-transform:rotateY(-180deg);-o-transform:rotateY(-180deg);transform:rotateY(-180deg);opacity:.5}to{-webkit-transform:rotateY(0deg);-ms-transform:rotateY(0deg);-o-transform:rotateY(0deg);transform:rotateY(0deg);opacity:1}}@-webkit-keyframes trunRight{0%{-webkit-transform:rotateY(-180deg);-ms-transform:rotateY(-180deg);-o-transform:rotateY(-180deg);transform:rotateY(-180deg);opacity:.5}to{-webkit-transform:rotateY(0deg);-ms-transform:rotateY(0deg);-o-transform:rotateY(0deg);transform:rotateY(0deg);opacity:1}}.makeAlbumButton{display:block;width:100%;text-align:center;line-height:1.2rem;background:#fff;color:#fc6767;flex:1;-webkit-flex:1}",""])},335:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"preivew"},[t._l(t.photoList,function(e,o){return[r("div",{staticClass:"block animated flipbook",class:{last:o==t.photoList.length-1,first:0==o},style:{"z-index":t.getImageIndex(o)},attrs:{"data-index":o},on:{touchstart:t.turnPage}},[r("div",{staticClass:"edit",style:{height:t.editorHeight+"px"},attrs:{href:"javascript:;","data-page":o}},[r("div",{staticClass:"pageDiv"},[r("div",{staticClass:"templateDiv",style:t.templateStyle(o)}),t._v(" "),t._l(e.list,function(e,a){return[r("div",{staticClass:"photoDiv",style:t.photoItemStyle(o,a)})]})],2)])])]}),t._v(" "),r("section",{directives:[{name:"show",rawName:"v-show",value:"share"==t.flag,expression:"flag == 'share'"}],staticClass:"bar-footer"},[r("a",{staticClass:"makeAlbumButton",on:{click:t.makeBtnClick}},[t._v("我也要制作")])])],2)},staticRenderFns:[]}},388:function(t,e,r){var o=r(230);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);r(119)("953025ae",o,!0)},422:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o=r(180),a=r(57),i=r(58);e.default={name:"album-preview",data:function(){return{editorWidth:.8*window.innerWidth,editorHeight:.8*window.innerWidth*1,albumId:this.$router.currentRoute.query.albumId,cfrom:this.$router.currentRoute.query.cfrom,appId:this.$router.currentRoute.query.appid,flag:this.$router.currentRoute.query.flag,photoList:[],backCoverImg:"",coverImg:""}},created:function(){this.fetchAlbumJson(),i.a.wxShowMenu(),i.a.wxShare({title:"2017个性定制精美照片书火热上线",desc:"新款照片书编辑器上线啦！模板丰富、操作简单、自由编辑、价格优惠、赶紧点击做一本吧！",link:location.origin+"/synergy/album/share?albumId="+this.albumId+"&appid="+this.appId+"&cfrom="+this.cfrom,image:"http://template.cache.timepack.cn/album_share_logo.png"})},mouted:function(){i.a.wxShowMenu()},methods:{fetchAlbumJson:function(){var t=this;a.a.getAlbumJsonByAlbumId({albumId:this.albumId},function(e){if(e.success){App.config.photoList=JSON.parse(e.data.albumJson),App.config.layoutList=JSON.parse(e.data.layoutJson),t.photoList=App.config.photoList;var r=App.config.layoutList[0],o=r.tw/r.th;t.editorHeight=t.editorWidth/o}})},fetchAlbumCover:function(){var t=this;a.a.getAlbumCoverImage({albumId:this.albumId},function(e){e.success&&(t.backCoverImg=e.data.backCoverImg,t.coverImg=e.data.coverImg)})},fetchShareSlogan:function(){a.a.getShareSlogan({appid:this.appId},function(t){t.success})},templateStyle:function(t){return"background:url("+o.a.getTemplateImage(t)+") center no-repeat;background-size:cover"},photoItemStyle:function(t,e){return o.a.setEitorPage(t,e,this.editorWidth,!1)},turnPage:function(e){if(e.preventDefault(),this.showTip=!1,1===e.targetTouches.length){var r=e.targetTouches[0],o=t(e.target).parents(".block"),a=o.attr("data-index");r.clientX<window.innerWidth/2?1==a?o.parent().find(".last").removeClass("turnLeftAnimation").addClass("turnRightAnimation"):2==a?o.parent().find(".first").removeClass("turnLeftAnimation").addClass("turnRightAnimation"):o.prev().removeClass("turnLeftAnimation").addClass("turnRightAnimation"):a<=this.photoList.length-1&&1!=a&&o.removeClass("turnRightAnimation").addClass("turnLeftAnimation")}},getImageIndex:function(t){return 0==t?1e3:1==t?1e3-this.photoList.length:1e3-t},makeBtnClick:function(t){t.preventDefault(),this.$router.push("/"+this.cfrom.toLowerCase()+"/list?appid="+this.appId)}}}}).call(e,r(15))}});