webpackJsonp([29,43],{153:function(e,t,a){a(387);var i=a(30)(a(444),a(334),"data-v-5652de75",null);e.exports=i.exports},229:function(e,t,a){t=e.exports=a(118)(),t.push([e.i,"#testform[data-v-5652de75]{display:none}.paint-upload[data-v-5652de75]{height:100%;background:#fff;text-align:center;padding-top:2.133rem}.paint-upload .tip[data-v-5652de75]{color:#969696;margin-top:.75rem}.paint-upload .image[data-v-5652de75]{margin-top:1.1rem}.paint-upload .image img[data-v-5652de75]{width:5.133rem}#uploaderButton[data-v-5652de75]{display:block;margin-top:1.23rem;width:100%;width:5.28rem;height:1rem;line-height:1rem;text-align:center;border-radius:1rem;margin:1.23rem auto 0;background:#e47f30;color:#fff}.u-layer[data-v-5652de75]{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;z-index:1001;background:rgba(0,0,0,.5);overflow:hidden}.u-upload[data-v-5652de75]{position:absolute;width:80%;left:10%;top:45%;padding:.6rem;background:#fff;z-index:1002;border-radius:.1rem;box-sizing:border-box;text-align:center}",""])},274:function(e,t,a){e.exports=a.p+"static/img/1-1.576ca8d.png"},334:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"paint-upload"},[a("div",{staticClass:"title f16"},[e._v("导入")]),e._v(" "),a("div",{staticClass:"tip"},[e._v("从照片库中上传高清照片或使用相机拍摄")]),e._v(" "),e._m(0),e._v(" "),e._m(1),e._v(" "),a("section",{directives:[{name:"show",rawName:"v-show",value:e.isUploading,expression:"isUploading"}],staticClass:"u-upload"},[e._v("\n    "+e._s(e.progressMessage)+"\n  ")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isUploading,expression:"isUploading"}],staticClass:"u-layer"}),e._v(" "),a("form",{attrs:{id:"testform",method:"post",enctype:"multipart/form-data"}},[a("input",{attrs:{name:"key",id:"key",type:"hidden"},domProps:{value:e.key}}),e._v(" "),a("input",{attrs:{name:"token",type:"hidden"},domProps:{value:e.token}}),e._v(" "),a("input",{attrs:{id:"userfile",name:"file",type:"file",accept:"image/*"},on:{change:e.upload}}),e._v(" "),a("input",{attrs:{name:"accept",type:"hidden"}})])])},staticRenderFns:[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"image"},[i("img",{attrs:{src:a(274),alt:""}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"button"},[a("label",{attrs:{id:"uploaderButton",for:"userfile"}},[e._v("\n      上传照片\n    ")])])}]}},387:function(e,t,a){var i=a(229);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(119)("b00635ea",i,!0)},444:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(57),o=a(63),n=a.n(o);t.default={data:function(){return{token:"",key:"",isUploading:!1,imageKey:"",progressMessage:""}},methods:{upload:function(e){var t=new FormData(document.getElementById("testform")),a=this;this.$http.post("http://up.qiniu.com",t,{progress:function(e){var t=parseFloat(e.loaded/e.total*100).toFixed(0)+"%";a.progressMessage="正在上传图片,已完成"+t}}).then(function(e){var t=e.body;a.isUploading=!1,t.hash&&t.key&&(a.imageKey=t.key,a.$router.push("/paint/edit?key="+a.imageKey))},function(e){console.log(e)})}},mounted:function(){var e=this;i.a.getQiniuToken(function(t){if(t.success){var a=Math.floor(9e3*Math.random())+1e3,i=Date.parse(new Date)/1e3+a;e.token=t.data,e.key=n()(i)}else Toast("当前排队人数过多,请稍后再试")})}}}});